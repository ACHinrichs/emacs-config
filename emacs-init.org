
* Org-related external file
Load general org-config from other file 
#+begin_src emacs-lisp
(with-eval-after-load "org"
  ;; load extra configs to org mode
  (org-babel-load-file "~/.emacs.d/org-config.org"))
#+end_src
** Org-Roam

Partly stolen from the following sites:
 - https://systemcrafters.net/build-a-second-brain-in-emacs/getting-started-with-org-roam/

Load Packages
#+begin_src emacs-lisp
  (use-package org-roam
	:ensure t
	:custom
	(org-roam-directory "~/sciebo/org-roam")
	:bind (("C-c n l" . org-roam-buffer-toggle)
	   ("C-c n f" . org-roam-node-find)
	   ("C-c n i" . org-roam-node-insert)
	   ("C-c n g" . org-roam-graph)
	   ("C-c n c" . org-roam-capture)

	   :map org-mode-map
	   ("C-M-i"    . completion-at-point))
  :config
  (org-roam-db-autosync-mode))
#+end_src
** Add tags to node display
#+begin_src emacs-lisp
  (setq org-roam-node-display-template
      (concat "${title:*} "
              (propertize "${tags:10}" 'face 'org-tag)))
#+end_src

#+RESULTS:
: ${title:*} ${tags:10}

** bibtex config
Sets locations for notes, the bibtex-file and pdfs, specifies the template for notes
#+begin_src emacs-lisp
    (setq
     bibtex-completion-notes-path "~/sciebo/org-roam"
     bibtex-completion-bibliography "~/sciebo/org-roam/bibliography.bib"
     bibtex-completion-library-path "~/sciebo/org-roam/pdfs"
     bibtex-completion-pdf-field "file"
     bibtex-completion-notes-template-multiple-files
     (concat
      ":PROPERTIES:\n:"
      "ID:         %(org-id-uuid)\n"
      ":ROAM_REFS: @${=key=}\n"
      ":END:\n"
      "#+TITLE: ${title}\n"
      "#+ROAM_KEY: cite:${=key=}\n"
      "#+FILETAGS: paper\n"
      "- keywords :: ${keywords}\n"
      "* TODO Notes\n"
      ":PROPERTIES:\n"
      ":Custom_ID: ${=key=}\n"
      ":NOTER_DOCUMENT: [[${file}]]\n"
      ":AUTHOR: ${author-abbrev}\n"
      ":JOURNAL: ${journaltitle}\n"
      ":DATE: ${date}\n"
      ":YEAR: ${year}\n"
      ":DOI: ${doi}\n"
      ":URL: ${url}\n"
      ":END:\n\n"
      )
     )
#+end_src

#+RESULTS:
#+begin_example
:PROPERTIES:
:ID:         %(org-id-uuid)
:ROAM_REFS: @${=key=}
:END:
,#+TITLE: ${title}
,#+ROAM_KEY: cite:${=key=}
,* TODO Notes
:PROPERTIES:
:Custom_ID: ${=key=}
:NOTER_DOCUMENT: [[${file}]]
:AUTHOR: ${author-abbrev}
:JOURNAL: ${journaltitle}
:DATE: ${date}
:YEAR: ${year}
:DOI: ${doi}
:URL: ${url}
:END:

#+end_example

Set keybinding, ~C-c n~ is org-roam prefix, so that fits

#+begin_src emacs-lisp
(global-set-key (kbd "C-c n r") 'ivy-bibtex) ; keybinding 
#+end_src

#+RESULTS:
: ivy-bibtex

** Org-Roam-Bibtex
#+begin_src emacs-lisp
    (use-package org-roam-bibtex
      :after (org-roam)
      :hook (org-roam-mode . org-roam-bibtex-mode)
      :config
      (setq org-roam-bibtex-preformat-keywords
       '("=key=" "title" "url" "file" "author-or-editor" "keywords"))
      (setq orb-templates
            '(("r" "ref" plain (function org-roam-capture--get-point)
               ""
               :file-name "${slug}"
               :head ":PROPERTIES:\n:ID:%(org-id-get-create)\n:ROAM_REFS:@${=key=}\n:END:\n
  #+TITLE: ${=key=}: ${title}\n#+ROAM_KEY: ${ref}

    - tags ::
    - keywords :: ${keywords}

    \n* ${title}\n  :PROPERTIES:\n  :Custom_ID: ${=key=}\n  :URL: ${url}\n  :AUTHOR: ${author-or-editor}\n  :NOTER_DOCUMENT: %(orb-process-file-field \"${=key=}\")\n  :NOTER_PAGE: \n  :END:\n\n"

               :unnarrowed t))))

#+end_src

#+RESULTS:
| org-roam-bibtex-mode |

** Fix multiple-tag bug in ~org-roam-ui~
#+begin_src elisp
(setq org-roam-database-connector 'sqlite)
#+end_src

#+RESULTS:
: sqlite

* Github Co-Pilot
Setup using [[https://robert.kra.hn/posts/2023-02-22-copilot-emacs-setup/][this blogpost]]

Ensure requirements are installed
#+begin_src elisp
  (require 'cl)
  (let ((pkg-list '(use-package
                     s
                     dash
                     editorconfig
                     company
                     jsonrpc)))
    (package-initialize)
    (when-let ((to-install (map-filter (lambda (pkg _) (not (package-installed-p pkg))) pkg-list)))
      (package-refresh-contents)
      (mapc (lambda (pkg) (package-install pkg)) pkg-list)))
#+end_src

#+RESULTS:

Load =copilot.el=

#+begin_src elisp
  (use-package copilot
    :load-path (lambda () (expand-file-name "copilot.el" user-emacs-directory))
    ;; don't show in mode line
    :diminish
    :bind (("C-c c c" . copilot-complete)
           ("C-c c a" . copilot-accept-completion)
           ("C-c c <left>" . copilot-accept-completion-by-word)
           ("C-c c C-<left>" . copilot-accept-completion-by-line)
           ("C-c c <down>" . copilot-next-completion)
           ("C-c c <up>". copilot-previous-completion)))  
#+end_src

#+RESULTS:
: copilot-previous-completion
